<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">>
<head>
    <meta charset="UTF-8">
    <title>音乐上传</title>
</head>
<body>
<h2>音乐上传</h2>
<hr/>
<form method="POST" enctype="multipart/form-data"
      action="/upload">
    <p>
        音乐文件1：<input type="file" name="file" /> (请上传.mp3文件)
    </p>
    <p>
        音乐文件2：<input type="file" name="file" />(请上传.ogg文件)
    </p>
    <p>
        音乐图片：<input type="file" name="file" />(请上传.jpg文件,20*20)
    </p>
    <p>歌曲名<input type="text" name="title" /></p>
    <p>歌手<input type="text" name="artist" /></p>
    <p>歌曲时长<input type="text" name="duration" >(格式 00:00)</p>

        <input  type="hidden" id="uname" name="uname" value=""/>
    <p>
        <input type="submit" value="上传" />
    </p>
</form>
</body>


<script th:inline="javascript">
    function getUname() {
        var url = location.search; //获取url中"?"符后的字串
        var x = url.indexOf("=");
        var ret = "";
        ret = ret + url.slice(x+1);
        return ret;
    }

    function testValidate()
    {
        document.getElementById('uname').value=getUname();
        if([[${message}]]=="FailNull") {alert("某输入为空,上传失败"); return;}
        if([[${message}]]=="FailFull"){alert("您可拥有的音乐数目已满,上传失败"); return;}
    }
    window.onload = testValidate;
</script>

</html>